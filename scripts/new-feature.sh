#!/bin/bash

# ìƒˆë¡œìš´ ê¸°ëŠ¥ ê°œë°œ ì‹œìž‘ ìŠ¤í¬ë¦½íŠ¸
# ì‚¬ìš©ë²•: ./scripts/new-feature.sh "ê¸°ëŠ¥ì´ë¦„"

FEATURE_NAME=$1
if [ -z "$FEATURE_NAME" ]; then
    echo "ì‚¬ìš©ë²•: ./scripts/new-feature.sh \"ê¸°ëŠ¥ì´ë¦„\""
    exit 1
fi

DATE=$(date +%Y%m%d)
PRD_FILE="docs/PRD_${FEATURE_NAME}_${DATE}.md"
DESIGN_FILE="docs/DESIGN_${FEATURE_NAME}_${DATE}.md"

echo "ðŸš€ ìƒˆë¡œìš´ ê¸°ëŠ¥ ê°œë°œì„ ì‹œìž‘í•©ë‹ˆë‹¤: $FEATURE_NAME"
echo ""

# 1. PRD í…œí”Œë¦¿ ìƒì„±
echo "ðŸ“ 1. PRD í…œí”Œë¦¿ ìƒì„± ì¤‘..."
cat > $PRD_FILE << 'EOF'
# ì œí’ˆ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ (PRD)
## ê¸°ëŠ¥ëª…: FEATURE_NAME

### 1. ì œí’ˆ ê°œìš”
#### 1.1 ì œí’ˆ ì •ì˜


#### 1.2 ë¬¸ì œ ì •ì˜


#### 1.3 ì œí’ˆ ëª©í‘œ

### 2. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
#### 2.1 í•µì‹¬ ê¸°ëŠ¥

#### 2.2 ë³´ì¡° ê¸°ëŠ¥

### 3. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
#### 3.1 ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­

#### 3.2 ì‹ ë¢°ì„± ìš”êµ¬ì‚¬í•­

#### 3.3 ë³´ì•ˆ ìš”êµ¬ì‚¬í•­

### 4. ë°ì´í„° ëª¨ë¸

### 5. ì™¸ë¶€ ì¸í„°íŽ˜ì´ìŠ¤

### 6. ê²€ìˆ˜ ê¸°ì¤€

---
EOF

sed -i "s/FEATURE_NAME/$FEATURE_NAME/g" $PRD_FILE
echo "âœ… PRD íŒŒì¼ ìƒì„±: $PRD_FILE"

# 2. ì„¤ê³„ í…œí”Œë¦¿ ìƒì„±
echo ""
echo "ðŸ—ï¸ 2. ì„¤ê³„ ê³„íš í…œí”Œë¦¿ ìƒì„± ì¤‘..."
cat > $DESIGN_FILE << 'EOF'
# ê¸°ìˆ  ì„¤ê³„ ê³„íš
## ê¸°ëŠ¥ëª…: FEATURE_NAME

### 1. ê°œìš”

### 2. ì•„í‚¤í…ì²˜ ì„¤ê³„
#### 2.1 íŒ¨í‚¤ì§€ êµ¬ì¡°

#### 2.2 ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### 3. ìƒì„¸ ì„¤ê³„
#### 3.1 í´ëž˜ìŠ¤ ë‹¤ì´ì–´ê·¸ëž¨

#### 3.2 ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

#### 3.3 API ì„¤ê³„

### 4. êµ¬í˜„ ì „ëžµ
#### 4.1 êµ¬í˜„ ìˆœì„œ

#### 4.2 í•µì‹¬ êµ¬í˜„ í¬ì¸íŠ¸

#### 4.3 ì˜ˆì™¸ ì²˜ë¦¬ ì „ëžµ

### 5. í…ŒìŠ¤íŠ¸ ì „ëžµ

---
EOF

sed -i "s/FEATURE_NAME/$FEATURE_NAME/g" $DESIGN_FILE
echo "âœ… ì„¤ê³„ ê³„íš íŒŒì¼ ìƒì„±: $DESIGN_FILE"

# 3. ì•ˆë‚´ ë©”ì‹œì§€
echo ""
echo "ðŸŽ¯ ë‹¤ìŒ ë‹¨ê³„:"
echo "1. $PRD_FILE íŒŒì¼ì„ ì—´ì–´ PRDë¥¼ ìž‘ì„±í•˜ì„¸ìš”"
echo "2. PRD ìž‘ì„± í›„, íŒ€ì›ë“¤ê³¼ ê²€í† í•˜ì„¸ìš”"
echo "3. PRDê°€ ìŠ¹ì¸ë˜ë©´ $DESIGN_FILE íŒŒì¼ì„ ì—´ì–´ ì„¤ê³„ë¥¼ ìž‘ì„±í•˜ì„¸ìš”"
echo "4. ì„¤ê³„ ê³„íš ê²€í†  í›„ ìŠ¹ì¸ë˜ë©´ êµ¬í˜„ì„ ì‹œìž‘í•˜ì„¸ìš”"
echo ""
echo "ðŸ“– ì „ì²´ í”„ë¡œì„¸ìŠ¤ëŠ” WORKFLOW.mdë¥¼ ì°¸ê³ í•˜ì„¸ìš”"