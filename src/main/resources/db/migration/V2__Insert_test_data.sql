-- 마켓플레이스 정산 시스템 테스트 데이터
-- 정산 대상일: 2024-01-15
-- 생성일: 2025-12-12

-- ==============================================
-- 1. 판매자 데이터 (3명)
-- ==============================================
INSERT INTO sellers (seller_code, seller_name, commission_rate, status) VALUES
('SELLER001', '테스트판매자A', 0.0800, 'ACTIVE'),   -- 수수료율 8%
('SELLER002', '테스트판매자B', 0.1000, 'ACTIVE'),   -- 수수료율 10%
('SELLER003', '테스트판매자C', 0.1200, 'ACTIVE');   -- 수수료율 12%

-- ==============================================
-- 2. 주문 데이터 (18건)
-- - 정산 대상: 15건 (CONFIRMED, SHIPPED, DELIVERED)
-- - 비대상: 3건 (PENDING, CANCELLED)
-- ==============================================

-- SELLER001 주문 (6건, 5건 정산대상)
INSERT INTO orders (order_no, seller_id, order_status, order_date, total_amount, shipping_fee) VALUES
('ORD-2024011501-001', 1, 'DELIVERED', '2024-01-15 09:00:00', 150000.00, 3000.00),
('ORD-2024011501-002', 1, 'DELIVERED', '2024-01-15 10:30:00', 280000.00, 0.00),
('ORD-2024011501-003', 1, 'SHIPPED', '2024-01-15 11:00:00', 89000.00, 2500.00),
('ORD-2024011501-004', 1, 'CONFIRMED', '2024-01-15 14:00:00', 320000.00, 0.00),
('ORD-2024011501-005', 1, 'CONFIRMED', '2024-01-15 16:30:00', 105000.00, 3000.00),
('ORD-2024011501-006', 1, 'PENDING', '2024-01-15 18:00:00', 75000.00, 2500.00);  -- 비정산대상

-- SELLER002 주문 (7건, 5건 정산대상)
INSERT INTO orders (order_no, seller_id, order_status, order_date, total_amount, shipping_fee) VALUES
('ORD-2024011502-001', 2, 'DELIVERED', '2024-01-15 08:30:00', 450000.00, 0.00),
('ORD-2024011502-002', 2, 'DELIVERED', '2024-01-15 09:45:00', 125000.00, 3000.00),
('ORD-2024011502-003', 2, 'SHIPPED', '2024-01-15 12:00:00', 89000.00, 2500.00),
('ORD-2024011502-004', 2, 'CONFIRMED', '2024-01-15 13:30:00', 156000.00, 0.00),
('ORD-2024011502-005', 2, 'CONFIRMED', '2024-01-15 15:00:00', 90000.00, 2500.00),
('ORD-2024011502-006', 2, 'CANCELLED', '2024-01-15 17:00:00', 200000.00, 0.00),  -- 비정산대상
('ORD-2024011502-007', 2, 'PENDING', '2024-01-15 19:30:00', 65000.00, 3000.00);  -- 비정산대상

-- SELLER003 주문 (5건, 5건 정산대상)
INSERT INTO orders (order_no, seller_id, order_status, order_date, total_amount, shipping_fee) VALUES
('ORD-2024011503-001', 3, 'DELIVERED', '2024-01-15 10:00:00', 85000.00, 2500.00),
('ORD-2024011503-002', 3, 'DELIVERED', '2024-01-15 11:30:00', 120000.00, 0.00),
('ORD-2024011503-003', 3, 'SHIPPED', '2024-01-15 13:00:00', 45000.00, 3000.00),
('ORD-2024011503-004', 3, 'CONFIRMED', '2024-01-15 14:30:00', 32000.00, 2500.00),
('ORD-2024011503-005', 3, 'CONFIRMED', '2024-01-15 16:00:00', 33000.00, 0.00);

-- ==============================================
-- 3. 주문 항목 데이터
-- ==============================================

-- SELLER001 주문항목
INSERT INTO order_items (order_id, product_name, unit_price, quantity, total_amount, is_refunded) VALUES
-- ORD-2024011501-001 (150,000원)
(1, '프리미엄 이어폰', 75000.00, 2, 150000.00, FALSE),
-- ORD-2024011501-002 (280,000원)
(2, '무선 키보드', 80000.00, 1, 80000.00, FALSE),
(2, '게이밍 마우스', 100000.00, 2, 200000.00, FALSE),
-- ORD-2024011501-003 (89,000원)
(3, 'USB 허브', 29000.00, 1, 29000.00, FALSE),
(3, '충전 케이블 세트', 30000.00, 2, 60000.00, TRUE),  -- 환불됨
-- ORD-2024011501-004 (320,000원)
(4, '모니터 암', 120000.00, 1, 120000.00, FALSE),
(4, '노트북 스탠드', 100000.00, 2, 200000.00, FALSE),
-- ORD-2024011501-005 (105,000원)
(5, '웹캠 HD', 65000.00, 1, 65000.00, FALSE),
(5, '마이크 스탠드', 40000.00, 1, 40000.00, FALSE),
-- ORD-2024011501-006 (PENDING - 비정산대상)
(6, '블루투스 스피커', 75000.00, 1, 75000.00, FALSE);

-- SELLER002 주문항목
INSERT INTO order_items (order_id, product_name, unit_price, quantity, total_amount, is_refunded) VALUES
-- ORD-2024011502-001 (450,000원)
(7, '스마트 워치', 250000.00, 1, 250000.00, TRUE),  -- 전액 환불됨
(7, '무선 이어버드', 200000.00, 1, 200000.00, FALSE),
-- ORD-2024011502-002 (125,000원)
(8, '보조배터리', 45000.00, 2, 90000.00, FALSE),
(8, '충전독', 35000.00, 1, 35000.00, FALSE),
-- ORD-2024011502-003 (89,000원)
(9, '핸드폰 케이스', 29000.00, 1, 29000.00, FALSE),
(9, '보호필름 세트', 30000.00, 2, 60000.00, TRUE),  -- 부분환불됨 (1개만)
-- ORD-2024011502-004 (156,000원)
(10, 'LED 조명', 78000.00, 2, 156000.00, FALSE),
-- ORD-2024011502-005 (90,000원)
(11, '멀티탭', 45000.00, 2, 90000.00, FALSE),
-- ORD-2024011502-006 (CANCELLED - 비정산대상)
(12, '무선충전패드', 100000.00, 2, 200000.00, FALSE),
-- ORD-2024011502-007 (PENDING - 비정산대상)
(13, 'USB 메모리', 32500.00, 2, 65000.00, FALSE);

-- SELLER003 주문항목
INSERT INTO order_items (order_id, product_name, unit_price, quantity, total_amount, is_refunded) VALUES
-- ORD-2024011503-001 (85,000원)
(14, '텀블러', 25000.00, 2, 50000.00, FALSE),
(14, '에코백', 35000.00, 1, 35000.00, TRUE),  -- 부분환불됨
-- ORD-2024011503-002 (120,000원)
(15, '데스크 매트', 40000.00, 3, 120000.00, FALSE),
-- ORD-2024011503-003 (45,000원)
(16, '핸드크림 세트', 15000.00, 3, 45000.00, FALSE),
-- ORD-2024011503-004 (32,000원)
(17, '마스킹 테이프', 8000.00, 4, 32000.00, FALSE),
-- ORD-2024011503-005 (33,000원)
(18, '포스트잇 세트', 11000.00, 3, 33000.00, FALSE);

-- ==============================================
-- 4. 결제 데이터 (정산대상 주문만)
-- ==============================================
INSERT INTO payments (order_id, payment_status, payment_method, payment_amount, paid_at) VALUES
-- SELLER001
(1, 'CONFIRMED', 'CARD', 153000.00, '2024-01-15 09:05:00'),
(2, 'CONFIRMED', 'CARD', 280000.00, '2024-01-15 10:35:00'),
(3, 'CONFIRMED', 'CARD', 91500.00, '2024-01-15 11:05:00'),
(4, 'CONFIRMED', 'KAKAO_PAY', 320000.00, '2024-01-15 14:05:00'),
(5, 'CONFIRMED', 'NAVER_PAY', 108000.00, '2024-01-15 16:35:00'),
(6, 'PENDING', 'CARD', 77500.00, NULL),  -- PENDING 상태

-- SELLER002
(7, 'PARTIALLY_REFUNDED', 'CARD', 450000.00, '2024-01-15 08:35:00'),  -- 부분환불됨
(8, 'CONFIRMED', 'KAKAO_PAY', 128000.00, '2024-01-15 09:50:00'),
(9, 'PARTIALLY_REFUNDED', 'CARD', 91500.00, '2024-01-15 12:05:00'),  -- 부분환불됨
(10, 'CONFIRMED', 'NAVER_PAY', 156000.00, '2024-01-15 13:35:00'),
(11, 'CONFIRMED', 'CARD', 92500.00, '2024-01-15 15:05:00'),
(12, 'CANCELLED', 'CARD', 200000.00, NULL),  -- CANCELLED 상태
(13, 'PENDING', 'KAKAO_PAY', 68000.00, NULL),  -- PENDING 상태

-- SELLER003
(14, 'PARTIALLY_REFUNDED', 'CARD', 87500.00, '2024-01-15 10:05:00'),  -- 부분환불됨
(15, 'CONFIRMED', 'NAVER_PAY', 120000.00, '2024-01-15 11:35:00'),
(16, 'CONFIRMED', 'CARD', 48000.00, '2024-01-15 13:05:00'),
(17, 'CONFIRMED', 'KAKAO_PAY', 34500.00, '2024-01-15 14:35:00'),
(18, 'CONFIRMED', 'CARD', 33000.00, '2024-01-15 16:05:00');

-- ==============================================
-- 5. 환불 데이터 (4건)
-- ==============================================
INSERT INTO refunds (order_item_id, refund_type, refund_amount, refund_quantity, refund_reason, refund_status, refunded_at) VALUES
-- SELLER001: 충전 케이블 세트 부분환불 (1개, 15,000원)
(5, 'PARTIAL_QUANTITY', 15000.00, 1, '제품 불량', 'COMPLETED', '2024-01-15 15:00:00'),

-- SELLER002: 스마트 워치 전액환불 (250,000원)
(11, 'FULL', 250000.00, 1, '단순 변심', 'COMPLETED', '2024-01-15 14:00:00'),

-- SELLER002: 보호필름 세트 부분환불 (1개, 30,000원)
(15, 'PARTIAL_QUANTITY', 30000.00, 1, '제품 불량', 'COMPLETED', '2024-01-15 16:00:00'),

-- SELLER003: 에코백 전액환불 (35,000원 -> 부분환불로 처리: 30,000원만)
(22, 'PARTIAL_AMOUNT', 30000.00, 0, '제품 오염', 'COMPLETED', '2024-01-15 14:30:00');

-- ==============================================
-- 테스트 데이터 요약
-- ==============================================
-- SELLER001 (수수료 8%):
--   총매출: 944,000원 (150,000 + 280,000 + 89,000 + 320,000 + 105,000)
--   환불액: 15,000원
--   순매출: 929,000원
--   수수료: 929,000 × 8% = 74,320원
--   부가세: 74,320 × 10% = 7,432원
--   정산액: 929,000 - 74,320 - 7,432 = 847,248원

-- SELLER002 (수수료 10%):
--   총매출: 910,000원 (450,000 + 125,000 + 89,000 + 156,000 + 90,000)
--   환불액: 280,000원 (250,000 + 30,000)
--   순매출: 630,000원
--   수수료: 630,000 × 10% = 63,000원
--   부가세: 63,000 × 10% = 6,300원
--   정산액: 630,000 - 63,000 - 6,300 = 560,700원

-- SELLER003 (수수료 12%):
--   총매출: 315,000원 (85,000 + 120,000 + 45,000 + 32,000 + 33,000)
--   환불액: 30,000원
--   순매출: 285,000원
--   수수료: 285,000 × 12% = 34,200원
--   부가세: 34,200 × 10% = 3,420원
--   정산액: 285,000 - 34,200 - 3,420 = 247,380원

SELECT 'Test data inserted successfully' AS message;
SELECT 'Sellers: 3, Orders: 18, Order Items: 26, Payments: 18, Refunds: 4' AS summary;
